<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#6860F6" data-link-color="#307FFF" data-resizable-sidebar="true" data-sidebar-width="260"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-11-26T16:21:04.4964488"><title>RISC-Ⅴ Architecture | Computer Science Study Notes</title><script type="application/json" id="virtual-toc-data">[{"id":"6-introduction-to-assembly-language-riscv","level":0,"title":"6 Introduction to Assembly Language","anchor":"#6-introduction-to-assembly-language-riscv"},{"id":"6-1-assembly-language-riscv","level":1,"title":"6.1 Assembly Language","anchor":"#6-1-assembly-language-riscv"},{"id":"6-2-registers-riscv","level":1,"title":"6.2 Registers","anchor":"#6-2-registers-riscv"},{"id":"6-3-risc-instructions-riscv","level":1,"title":"6.3 RISC-Ⅴ Instructions","anchor":"#6-3-risc-instructions-riscv"},{"id":"6-3-1-basic-arithmetic-instructions","level":2,"title":"6.3.1 Basic Arithmetic Instructions","anchor":"#6-3-1-basic-arithmetic-instructions"},{"id":"6-3-2-immediate-instructions","level":2,"title":"6.3.2 Immediate Instructions","anchor":"#6-3-2-immediate-instructions"},{"id":"6-3-3-data-transfer-instructions","level":2,"title":"6.3.3 Data Transfer Instructions","anchor":"#6-3-3-data-transfer-instructions"},{"id":"6-3-4-control-flow-instructions","level":2,"title":"6.3.4 Control Flow Instructions","anchor":"#6-3-4-control-flow-instructions"},{"id":"6-3-5-shifting-instructions","level":2,"title":"6.3.5 Shifting Instructions","anchor":"#6-3-5-shifting-instructions"},{"id":"6-4-c-assembly-machine-code-riscv","level":1,"title":"6.4 C, Assembly \u0026 Machine Code","anchor":"#6-4-c-assembly-machine-code-riscv"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="Computer-Science-Study-Notes/photo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="RISC-Ⅴ Architecture | Computer Science Study Notes"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Computer Science Study Notes Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/computer-architecture-risc-v.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="RISC-Ⅴ Architecture | Computer Science Study Notes"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/computer-architecture-risc-v.html#webpage",
    "url": "writerside-documentation/computer-architecture-risc-v.html",
    "name": "RISC-Ⅴ Architecture | Computer Science Study Notes",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Computer Science Study Notes Help"
}</script><!-- End Schema.org --></head><body data-id="Computer-Architecture-RISC-V" data-main-title="RISC-Ⅴ Architecture" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Computer-Architecture.topic|Computer Architecture"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Computer Science Study Notes  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Computer-Architecture-RISC-V" id="Computer-Architecture-RISC-V.topic">RISC-Ⅴ Architecture</h1><section class="chapter"><h2 id="6-introduction-to-assembly-language-riscv" data-toc="6-introduction-to-assembly-language-riscv">6 Introduction to Assembly Language</h2><section class="chapter"><h3 id="6-1-assembly-language-riscv" data-toc="6-1-assembly-language-riscv">6.1 Assembly Language</h3><p id="-sd6wqk_9"><span id="-sd6wqk_18"><font style="color:#ff8c00">Assembly (also known as Assembly language, ASM):</font></span> A low-level programming language where the program instructions match a particular architecture's operations.</p><p id="-sd6wqk_10"><span id="-sd6wqk_19"><font style="color:#ff8c00">Architecture:</font></span> (also ISA: instruction set architecture) The parts of a processor design that one needs to understand for writing assembly/machine code.</p><p id="-sd6wqk_11"><span id="-sd6wqk_20"><font style="color:#8a2be2">Properties:</font></span></p><ul class="list _bullet" id="-sd6wqk_12"><li class="list__item" id="-sd6wqk_21"><p id="-sd6wqk_24">Splits a program into many small instructions that each do one single part of the process.</p></li><li class="list__item" id="-sd6wqk_22"><p id="-sd6wqk_25">Each architecture will have a different set of operations that it supports (although there are similarities).</p></li><li class="list__item" id="-sd6wqk_23"><p id="-sd6wqk_26">Assembly is not <span id="-sd6wqk_27"><i>portable</i></span> to other architectures.</p></li></ul><p id="-sd6wqk_13"><span id="-sd6wqk_28"><font style="color:#8a2be2">Complex/Reduced Instruction Set Computing</font></span></p><ol class="list _alpha-lower" id="-sd6wqk_14" type="a"><li class="list__item" id="-sd6wqk_29"><p id="-sd6wqk_31">Early trend - add more and more instructions to do elaborate operations</p><p id="-sd6wqk_32"><span id="-sd6wqk_34"><font style="color:#ff00ff">Complex Instruction Set Computing (CISC)</font></span></p><ul class="list _bullet" id="-sd6wqk_33"><li class="list__item" id="-sd6wqk_35"><p id="-sd6wqk_38">Difficult to learn and comprehend language</p></li><li class="list__item" id="-sd6wqk_36"><p id="-sd6wqk_39">Less work for the compiler</p></li><li class="list__item" id="-sd6wqk_37"><p id="-sd6wqk_40">Complicated hardware runs more slowly</p></li></ul></li><li class="list__item" id="-sd6wqk_30"><p id="-sd6wqk_41">Opposite philosophy later began to dominate</p><p id="-sd6wqk_42"><span id="-sd6wqk_44"><font style="color:#ff00ff">Reduced Instruction Set Computing (RISC)</font></span></p><ul class="list _bullet" id="-sd6wqk_43"><li class="list__item" id="-sd6wqk_45"><p id="-sd6wqk_47">Simple (and smaller) instruction set makes it easier to build fast hardware.</p></li><li class="list__item" id="-sd6wqk_46"><p id="-sd6wqk_48">Let software do the complicated operations by composing simpler ones.</p></li></ul></li></ol><p id="-sd6wqk_15"><span id="-sd6wqk_49"><font style="color:#8a2be2">Code:</font></span></p><p id="-sd6wqk_16">op dst, src1, src2</p><ul class="list _bullet" id="-sd6wqk_17"><li class="list__item" id="-sd6wqk_50"><p id="-sd6wqk_54"><code class="code" id="-sd6wqk_55">op</code>: operation name (&quot;operator&quot;)</p></li><li class="list__item" id="-sd6wqk_51"><p id="-sd6wqk_56"><code class="code" id="-sd6wqk_57">dst</code>: register getting result (&quot;destination&quot;)</p></li><li class="list__item" id="-sd6wqk_52"><p id="-sd6wqk_58"><code class="code" id="-sd6wqk_59">src1</code>: first register for operation (&quot;source 1&quot;)</p></li><li class="list__item" id="-sd6wqk_53"><p id="-sd6wqk_60"><code class="code" id="-sd6wqk_61">src2</code>: second register for operation (&quot;source 2&quot;)</p></li></ul></section><section class="chapter"><h3 id="6-2-registers-riscv" data-toc="6-2-registers-riscv">6.2 Registers</h3><p id="-sd6wqk_62">Assembly uses registers to store values. Registers are:</p><ul class="list _bullet" id="-sd6wqk_63"><li class="list__item" id="-sd6wqk_67"><p id="-sd6wqk_71">Small memories of a fixed size.</p></li><li class="list__item" id="-sd6wqk_68"><p id="-sd6wqk_72">Can be read or written.</p></li><li class="list__item" id="-sd6wqk_69"><p id="-sd6wqk_73">Limited in number.</p></li><li class="list__item" id="-sd6wqk_70"><p id="-sd6wqk_74">Very fast and low power to access.</p></li></ul><div class="table-wrapper"><table class="left_header wide" id="-sd6wqk_64"><thead><tr class="ijRowHead" id="-sd6wqk_75"><th id="-sd6wqk_79"><p>Registers</p></th><th id="-sd6wqk_80"><p>Memory</p></th></tr></thead><tbody><tr id="-sd6wqk_76"><th id="-sd6wqk_81"><p>Speed</p></th><td id="-sd6wqk_82"><p>Fast</p></td><td id="-sd6wqk_83"><p>Slow</p></td></tr><tr id="-sd6wqk_77"><th id="-sd6wqk_84"><p>Size</p></th><td id="-sd6wqk_85"><p id="-sd6wqk_87">Small</p><p id="-sd6wqk_88">e.g., 32 registers * 32 bit = 128 bytes</p></td><td id="-sd6wqk_86"><p id="-sd6wqk_89">Big</p><p id="-sd6wqk_90">4-32 GB</p></td></tr><tr id="-sd6wqk_78"><th id="-sd6wqk_91"><p>Connection</p></th><td id="-sd6wqk_92" colspan="2"><p id="-sd6wqk_93">More variables than registers?</p><p id="-sd6wqk_94">Keep most frequently used in registers and move the rest to memory</p></td></tr></tbody></table></div><figure id="-sd6wqk_65"><img alt="Registers" src="Computer-Science-Study-Notes/a6-2-1.png" title="Registers" width="2207" height="1307"></figure><aside class="prompt" data-type="warning" data-title="" id="-sd6wqk_66"><p id="-sd6wqk_95">Some important notes about registers:</p><ul class="list _bullet" id="-sd6wqk_96"><li class="list__item" id="-sd6wqk_97"><p id="-sd6wqk_102">Each ISA has a predetermined number of registers, registers are built in with hardware.</p></li><li class="list__item" id="-sd6wqk_98"><p id="-sd6wqk_103">Register denoted by 'x' can be referenced by number (x0 - x31) or by name (s0 - s11, t0 - t6).</p><ul class="list _bullet" id="-sd6wqk_104"><li class="list__item" id="-sd6wqk_105"><p id="-sd6wqk_108"><span id="-sd6wqk_110"><font style="color:#ff00ff">Safe registers:</font></span> Registers that hold programmer variables</p><ul class="list _bullet" id="-sd6wqk_109"><li class="list__item" id="-sd6wqk_111"><p id="-sd6wqk_113">s0 - s1 &lt;=&gt; x8 - x9</p></li><li class="list__item" id="-sd6wqk_112"><p id="-sd6wqk_114">s2 - s1 &lt;=&gt; x8 - x9</p></li></ul></li><li class="list__item" id="-sd6wqk_106"><p id="-sd6wqk_115"><span id="-sd6wqk_117"><font style="color:#ff00ff">Temporary registers:</font></span> Registers that hold temporary variables</p><ul class="list _bullet" id="-sd6wqk_116"><li class="list__item" id="-sd6wqk_118"><p id="-sd6wqk_120">t0 - t2 &lt;=&gt; x5 - x7</p></li><li class="list__item" id="-sd6wqk_119"><p id="-sd6wqk_121">t3 - t6 &lt;=&gt; x28 - x31</p></li></ul></li><li class="list__item" id="-sd6wqk_107"><p id="-sd6wqk_122">Other registers have special functions!</p></li></ul></li><li class="list__item" id="-sd6wqk_99"><p id="-sd6wqk_123">Registers have no type!</p></li><li class="list__item" id="-sd6wqk_100"><p id="-sd6wqk_124">Register zero (x0 or zero) always has the value 0 and cannot be changed! Any instruction writing to x0 has no effect!</p></li><li class="list__item" id="-sd6wqk_101"><p id="-sd6wqk_125">In high-level languages, number of variables limited only by available memory.</p></li></ul></aside></section><section class="chapter"><h3 id="6-3-risc-instructions-riscv" data-toc="6-3-risc-instructions-riscv">6.3 RISC-Ⅴ Instructions</h3><p id="-sd6wqk_127">In high-level languages, variable types determine operation.</p><p id="-sd6wqk_128">In assembly, operation determines type, i.e., how register contents are treated.</p><p id="-sd6wqk_129"><span id="-sd6wqk_136"><font style="color:#8a2be2">Operations</font></span></p><ul class="list _bullet" id="-sd6wqk_130"><li class="list__item" id="-sd6wqk_137"><p id="-sd6wqk_140"><span id="-sd6wqk_142"><font style="color:#ff00ff">Transfer data between memory and register</font></span></p><ul class="list _bullet" id="-sd6wqk_141"><li class="list__item" id="-sd6wqk_143"><p id="-sd6wqk_145">Load data from memory into register</p></li><li class="list__item" id="-sd6wqk_144"><p id="-sd6wqk_146">Store register data into memory</p></li></ul></li><li class="list__item" id="-sd6wqk_138"><p id="-sd6wqk_147"><span id="-sd6wqk_148"><font style="color:#ff00ff">Perform arithmetic function on register or memory data</font></span></p></li><li class="list__item" id="-sd6wqk_139"><p id="-sd6wqk_149"><span id="-sd6wqk_151"><font style="color:#ff00ff">Transfer control</font></span></p><ul class="list _bullet" id="-sd6wqk_150"><li class="list__item" id="-sd6wqk_152"><p id="-sd6wqk_155">Unconditional jumps to/from procedures</p></li><li class="list__item" id="-sd6wqk_153"><p id="-sd6wqk_156">Conditional branches</p></li><li class="list__item" id="-sd6wqk_154"><p id="-sd6wqk_157">Indirect branches</p></li></ul></li></ul><section class="chapter"><h4 id="6-3-1-basic-arithmetic-instructions" data-toc="6-3-1-basic-arithmetic-instructions">6.3.1 Basic Arithmetic Instructions</h4><aside class="prompt" data-type="note" data-title="" id="-sd6wqk_158"><p id="-sd6wqk_162">Assume here that the variables a, b and c are assigned to registers s1, s2 and s3, respectively.</p></aside><p id="-sd6wqk_159"><span id="-sd6wqk_163"><font style="color:#8a2be2">Types:</font></span></p><ul class="list _bullet" id="-sd6wqk_160"><li class="list__item" id="-sd6wqk_164"><p id="-sd6wqk_166"><span id="-sd6wqk_168"><font style="color:#ff00ff">Integer Addition</font></span></p><ul class="list _bullet" id="-sd6wqk_167"><li class="list__item" id="-sd6wqk_169"><p id="-sd6wqk_171">C: a = b + c;</p></li><li class="list__item" id="-sd6wqk_170"><p id="-sd6wqk_172">RISC-Ⅴ: add s1, s2, s3</p></li></ul></li><li class="list__item" id="-sd6wqk_165"><p id="-sd6wqk_173"><span id="-sd6wqk_175"><font style="color:#ff00ff">Integer Subtraction</font></span></p><ul class="list _bullet" id="-sd6wqk_174"><li class="list__item" id="-sd6wqk_176"><p id="-sd6wqk_178">C: a = b - c;</p></li><li class="list__item" id="-sd6wqk_177"><p id="-sd6wqk_179">RISC-Ⅴ: sub s1, s2, s3</p></li></ul></li></ul><aside class="prompt" data-type="note" data-title="" id="-sd6wqk_161"><p id="-sd6wqk_180"><span id="-sd6wqk_182"><font style="color:#ff00ff">add:</font></span> Perform addition</p><p id="-sd6wqk_181"><span id="-sd6wqk_183"><font style="color:#ff00ff">addw:</font></span> Addition with words (32 bits)</p></aside></section><section class="chapter"><h4 id="6-3-2-immediate-instructions" data-toc="6-3-2-immediate-instructions">6.3.2 Immediate Instructions</h4><p id="-sd6wqk_184"><span id="-sd6wqk_188"><font style="color:#ff8c00">Immediates:</font></span> Numerical constants.</p><p id="-sd6wqk_185"><span id="-sd6wqk_189"><font style="color:#8a2be2">Syntax:</font></span> opi dst, src, imm</p><ul class="list _bullet" id="-sd6wqk_186"><li class="list__item" id="-sd6wqk_190"><p id="-sd6wqk_194">Operation names end with &quot;i&quot;, replace <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="3.098ex" height="1.932ex" role="img" focusable="false" viewBox="0 -853.7 1369.3 853.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path data-c="64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z" transform="translate(556,0)"></path></g></g></g></g></g></svg></mjx-container> source register with an immeidate.</p></li><li class="list__item" id="-sd6wqk_191"><p id="-sd6wqk_196">Immediates can up to 12-bits in size.</p></li><li class="list__item" id="-sd6wqk_192"><p id="-sd6wqk_197">Interpreted as sign-extended two's complement.</p></li><li class="list__item" id="-sd6wqk_193"><p id="-sd6wqk_198">RISC-Ⅴ hardwires the register zero (x0) to value 0.</p><p id="-sd6wqk_199">Example: RISC-Ⅴ: add x3 x4 0</p><p id="-sd6wqk_200">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f = g</p></li></ul><aside class="prompt" data-type="warning" data-title="" id="-sd6wqk_187"><p id="-sd6wqk_201">No <code class="code" id="-sd6wqk_202">subi</code> instruction, since RISC-Ⅴ is all about reducing # of instructions.</p></aside></section><section class="chapter"><h4 id="6-3-3-data-transfer-instructions" data-toc="6-3-3-data-transfer-instructions">6.3.3 Data Transfer Instructions</h4><p id="-sd6wqk_203">Specialized <span id="-sd6wqk_211"><font style="color:#ff4500">data transfer instructions</font></span> move data between registers and memory.</p><ul class="list _bullet" id="-sd6wqk_204"><li class="list__item" id="-sd6wqk_212"><p id="-sd6wqk_214"><span id="-sd6wqk_215"><font style="color:#ff00ff">Store:</font></span> register TO memory</p></li><li class="list__item" id="-sd6wqk_213"><p id="-sd6wqk_216"><span id="-sd6wqk_217"><font style="color:#ff00ff">Load:</font></span> register FROM memory</p></li></ul><p id="-sd6wqk_205"><span id="-sd6wqk_218"><font style="color:#8a2be2">Syntax:</font></span> memop reg, off (bAbbr)</p><ul class="list _bullet" id="-sd6wqk_206"><li class="list__item" id="-sd6wqk_219"><p id="-sd6wqk_223"><code class="code" id="-sd6wqk_224">memop</code>: operation name (&quot;operator&quot;)</p></li><li class="list__item" id="-sd6wqk_220"><p id="-sd6wqk_225"><code class="code" id="-sd6wqk_226">reg</code>: register for operation source or destination.</p></li><li class="list__item" id="-sd6wqk_221"><p id="-sd6wqk_227"><code class="code" id="-sd6wqk_228">bAbbr</code>: register with pointer to memory (&quot;base address&quot;)</p></li><li class="list__item" id="-sd6wqk_222"><p id="-sd6wqk_229"><code class="code" id="-sd6wqk_230">off</code>: Address offset (immediate) in bytes (&quot;offset&quot;)</p></li></ul><p id="-sd6wqk_207"><span id="-sd6wqk_231"><font style="color:#8a2be2">Types:</font></span></p><ul class="list _bullet" id="-sd6wqk_208"><li class="list__item" id="-sd6wqk_232"><p id="-sd6wqk_234"><span id="-sd6wqk_235"><font style="color:#ff00ff">Load Word:</font></span> Takes data at address <code class="code" id="-sd6wqk_236">bAbbr+off</code> FROM memory and places it into <code class="code" id="-sd6wqk_237">reg</code>.</p></li><li class="list__item" id="-sd6wqk_233"><p id="-sd6wqk_238"><span id="-sd6wqk_239"><font style="color:#ff00ff">Store Word:</font></span> Takes data in <code class="code" id="-sd6wqk_240">reg</code> and stores it TO memory at <code class="code" id="-sd6wqk_241">bAbbr+off</code>.</p></li></ul><p id="-sd6wqk_209"><span id="-sd6wqk_242"><font style="color:#8a2be2">Example:</font></span> address of int array [] -&gt; s3, value of b -&gt; s2</p><ul class="list _bullet" id="-sd6wqk_210"><li class="list__item" id="-sd6wqk_243"><p id="-sd6wqk_245">C: array[10] = array[3] + b;</p></li><li class="list__item" id="-sd6wqk_244"><p id="-sd6wqk_246">RISC-Ⅴ</p><p id="-sd6wqk_247">lw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t0, <span id="-sd6wqk_250"><font style="color:#ff4500">l2</font></span> (s3)&nbsp;&nbsp;&nbsp;&nbsp;# t0 = A[<span id="-sd6wqk_251"><font style="color:#ff4500">3</font></span>]</p><p id="-sd6wqk_248">add&nbsp;&nbsp;&nbsp;&nbsp;t0, s2, t0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# t0 = A[3] + b</p><p id="-sd6wqk_249">sw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t0, <span id="-sd6wqk_252"><font style="color:#ff4500">40</font></span> (s3)&nbsp;&nbsp;# A[<span id="-sd6wqk_253"><font style="color:#ff4500">10</font></span>] = A[3] + b</p></li></ul></section><section class="chapter"><h4 id="6-3-4-control-flow-instructions" data-toc="6-3-4-control-flow-instructions">6.3.4 Control Flow Instructions</h4><p id="-sd6wqk_254"><span id="-sd6wqk_262"><font style="color:#ff8c00">Labels in RISC-Ⅴ:</font></span> Defined by a text and followed by a colon (e.g., main:) and refers to the instructions that follows; generate control flow by jumping to labels.</p><p id="-sd6wqk_255"><span id="-sd6wqk_263"><font style="color:#8a2be2">Types:</font></span></p><ol class="list _alpha-lower" id="-sd6wqk_256" type="a"><li class="list__item" id="-sd6wqk_264"><p id="-sd6wqk_269"><span id="-sd6wqk_271"><font style="color:#ff00ff">Branch If Equal</font></span> (beq)</p><ul class="list _bullet" id="-sd6wqk_270"><li class="list__item" id="-sd6wqk_272"><p id="-sd6wqk_275"><span id="-sd6wqk_276"><font style="color:#7cfc00">Syntax:</font></span> beq reg1, reg2, label</p></li><li class="list__item" id="-sd6wqk_273"><p id="-sd6wqk_277">If value in reg1 == value in reg2, go to label.</p></li><li class="list__item" id="-sd6wqk_274"><p id="-sd6wqk_278">Otherwise go to next instruction.</p></li></ul></li><li class="list__item" id="-sd6wqk_265"><p id="-sd6wqk_279"><span id="-sd6wqk_281"><font style="color:#ff00ff">Branch If Not Equal</font></span> (bne)</p><ul class="list _bullet" id="-sd6wqk_280"><li class="list__item" id="-sd6wqk_282"><p id="-sd6wqk_284"><span id="-sd6wqk_285"><font style="color:#7cfc00">Syntax:</font></span> bne reg1, reg2, label</p></li><li class="list__item" id="-sd6wqk_283"><p id="-sd6wqk_286">If value in reg1 &amp;#8800; value in reg2, go to label.</p></li></ul></li><li class="list__item" id="-sd6wqk_266"><p id="-sd6wqk_287"><span id="-sd6wqk_289"><font style="color:#ff00ff">Jump</font></span> (j)</p><ul class="list _bullet" id="-sd6wqk_288"><li class="list__item" id="-sd6wqk_290"><p id="-sd6wqk_292"><span id="-sd6wqk_293"><font style="color:#7cfc00">Syntax:</font></span> j label</p></li><li class="list__item" id="-sd6wqk_291"><p id="-sd6wqk_294">Unconditional jump to label.</p></li></ul></li><li class="list__item" id="-sd6wqk_267"><p id="-sd6wqk_295"><span id="-sd6wqk_297"><font style="color:#ff00ff">Branch Less Than</font></span> (blt)</p><ul class="list _bullet" id="-sd6wqk_296"><li class="list__item" id="-sd6wqk_298"><p id="-sd6wqk_300"><span id="-sd6wqk_301"><font style="color:#7cfc00">Syntax:</font></span> blt reg1, reg2, label</p></li><li class="list__item" id="-sd6wqk_299"><p id="-sd6wqk_302">If value in reg1 &lt; value in reg2, go to label.</p></li></ul></li><li class="list__item" id="-sd6wqk_268"><p id="-sd6wqk_303"><span id="-sd6wqk_305"><font style="color:#ff00ff">Branch Less Than or Equal</font></span> (ble)</p><ul class="list _bullet" id="-sd6wqk_304"><li class="list__item" id="-sd6wqk_306"><p id="-sd6wqk_308"><span id="-sd6wqk_309"><font style="color:#7cfc00">Syntax:</font></span> ble reg1, reg2, label</p></li><li class="list__item" id="-sd6wqk_307"><p id="-sd6wqk_310">If value in reg1 &amp;#8804; value in reg2, go to label.</p></li></ul></li></ol><div class="code-comparer" id="-sd6wqk_257" data-comparing="vertically"><div class="code-block" data-lang="c" data-title="C">
                        if (i == j) {
                        a = b; /* then */
                        } else {
                        a = -b; /* else */
                        }
                    </div><div class="code-block" data-lang="python" data-title="RISCV (beq)">
                        # i -&gt; s0, j -&gt; s1
                        # a -&gt; s2, b -&gt; s3
                        beq s0, s1, then
                        else:
                        sub s2, x0, s3
                        j end
                        then:
                        add s2, s3, x0
                        end:
                    </div></div><p id="-sd6wqk_258"><span id="-sd6wqk_313"><font style="color:#8a2be2">Loops in RISC-Ⅴ:</font></span></p><ul class="list _bullet" id="-sd6wqk_259"><li class="list__item" id="-sd6wqk_314"><p id="-sd6wqk_317">There are three types of loops in C: while, do...while, and for.</p></li><li class="list__item" id="-sd6wqk_315"><p id="-sd6wqk_318">These can be created with branch instructions as well.</p></li><li class="list__item" id="-sd6wqk_316"><p id="-sd6wqk_319">The key to decision making is the branch statement.</p></li></ul><p id="-sd6wqk_260"><span id="-sd6wqk_320"><font style="color:#8a2be2">Program Counter:</font></span></p><ul class="list _bullet" id="-sd6wqk_261"><li class="list__item" id="-sd6wqk_321"><p id="-sd6wqk_325">Program Counter (PC): A special register that contains the current address of the code that is being executed.</p></li><li class="list__item" id="-sd6wqk_322"><p id="-sd6wqk_326">Branches and Jumps change the flow of execution by modifying the PC.</p></li><li class="list__item" id="-sd6wqk_323"><p id="-sd6wqk_327">Instructions are stored as data in memory (code section) and have addresses! Labels get converted to instruction addresses.</p></li><li class="list__item" id="-sd6wqk_324"><p id="-sd6wqk_328">The PC tracks where in memory the current instruction is.</p></li></ul></section><section class="chapter"><h4 id="6-3-5-shifting-instructions" data-toc="6-3-5-shifting-instructions">6.3.5 Shifting Instructions</h4><p id="-sd6wqk_329"><span id="-sd6wqk_333"><font style="color:#8a2be2">Shifting Operations</font></span></p><div class="table-wrapper"><table class="wide" id="-sd6wqk_330"><thead><tr class="ijRowHead" id="-sd6wqk_334"><th id="-sd6wqk_341"><p>Instruction Name</p></th><th id="-sd6wqk_342"><p>RISC-Ⅴ</p></th></tr></thead><tbody><tr id="-sd6wqk_335"><td id="-sd6wqk_343"><p>Shift Left Logical</p></td><td id="-sd6wqk_344"><p>sll s1, s2, s3</p></td></tr><tr id="-sd6wqk_336"><td id="-sd6wqk_345"><p>Shift Left Logical Imm</p></td><td id="-sd6wqk_346"><p>sll1 s1, s2, imm</p></td></tr><tr id="-sd6wqk_337"><td id="-sd6wqk_347"><p>Shift Right Logical</p></td><td id="-sd6wqk_348"><p>srl s1, s2, s3</p></td></tr><tr id="-sd6wqk_338"><td id="-sd6wqk_349"><p>Shift Right Logical Imm</p></td><td id="-sd6wqk_350"><p>srli s1, s2, imm</p></td></tr><tr id="-sd6wqk_339"><td id="-sd6wqk_351"><p>Shift Right Arithmetic</p></td><td id="-sd6wqk_352"><p>sra s1, s2, s3</p></td></tr><tr id="-sd6wqk_340"><td id="-sd6wqk_353"><p>Shift Right Arithmetic Imm</p></td><td id="-sd6wqk_354"><p>srai s1, s2, imm</p></td></tr></tbody></table></div><aside class="prompt" data-type="note" data-title="" id="-sd6wqk_331"><p id="-sd6wqk_355">For a 32-bit RISC-Ⅴ system,</p><ul class="list _bullet" id="-sd6wqk_356"><li class="list__item" id="-sd6wqk_357"><p id="-sd6wqk_359">When using immediate, only values 0-31 are practical.</p></li><li class="list__item" id="-sd6wqk_358"><p id="-sd6wqk_360">When using variable, only lowest 5 bits are used.</p></li></ul></aside><div class="code-block" data-lang="none">
                    addi t0, x0, -256 # t0=0xFFFFFF00
                    slli s0, t0, 3    # s0=0xFFFFF800
                    srli s1, t0, 8    # s1=0x00FFFFFF
                    srai s2, t0, 8    # s2=0xFFFFFFFF

                    addi t1, x0, -22  # t1=0xFFFFFFEA
                    sll s3, t0, t1    # s3=0xFFFC0000
                </div></section></section><section class="chapter"><h3 id="6-4-c-assembly-machine-code-riscv" data-toc="6-4-c-assembly-machine-code-riscv">6.4 C, Assembly &amp; Machine Code</h3><p id="-sd6wqk_361">Compile with the following code (debugging-friendly):</p><div class="code-block" data-lang="none">
                gcc –Og p1.c -o p
            </div><figure id="-sd6wqk_363"><img alt="C, Assembly &amp; Machine Code" src="Computer-Science-Study-Notes/a6-4-1.png" title="C, Assembly &amp; Machine Code" width="2631" height="1242"></figure><p id="-sd6wqk_364">Use the following command to generate the assembly code:</p><div class="code-block" data-lang="none">
                gcc –Og –S p1.c
            </div><p id="-sd6wqk_366">Use the following command to disassembly the machine code:</p><div class="code-block" data-lang="none">
                objdump –d p1
            </div></section></section><div class="last-modified">Last modified: 26 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="computer-architecture.html" class="navigation-links__prev">Computer Architecture</a><a href="computer-architecture-x86-64.html" class="navigation-links__next">x86-64 Architecture</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.js"></script></body></html>